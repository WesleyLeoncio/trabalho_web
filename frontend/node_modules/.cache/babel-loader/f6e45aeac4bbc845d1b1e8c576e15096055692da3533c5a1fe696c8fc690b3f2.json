{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\wesle\\\\OneDrive\\\\Documentos\\\\Git\\\\trabalho_web\\\\frontend\\\\src\\\\pages\\\\alunos\\\\Alteracao.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport * as yup from \"yup\";\nimport axios from \"axios\";\nimport bootstrap from \"bootstrap/dist/js/bootstrap.bundle.min.js\";\nimport FormAluno from \"../../components/FormAluno\";\nimport InformModal from \"../../components/InformModal\";\nimport { authHeader } from \"../../services/authServices\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Alteracao = () => {\n  _s();\n  const [inputs, setInputs] = useState({});\n  const [errors, setErrors] = useState({});\n  const [modal, setModal] = useState(undefined);\n  const navigate = useNavigate();\n  const idAluno = useParams().id;\n  if (!idAluno) {\n    navigate(\"/listagem\");\n  }\n\n  //https://github.com/jquense/yup\n  const validator = yup.object().shape({\n    nome: yup.string().required(\"Nome é obrigatório.\"),\n    dataNascimento: yup.date().required(\"Data de nascimento é obrigatória.\"),\n    cpf: yup.string().length(11, \"CPF está incompleto.\").required(\"CPF é obrigatório.\"),\n    sexo: yup.string().oneOf([\"M\", \"F\", \"O\"], \"Gênero está incorreto.\").required(\"Gênero é obrigatório.\"),\n    telefone: yup.string().length(11, \"Telefone está incompleto.\").required(\"Telefone é obrigatório.\"),\n    email: yup.string().email(\"E-mail inválido.\").required(\"E-mail é obrigatório.\"),\n    //durante a alteração, senha e confSenha não são obrigatórios\n    // senha: yup.string().min(6, \"Senha deve ter pelo menos 6 caracteres.\").max(12, \"Senha deve ter no máximo 12 caracteres.\").required(\"Senha é obrigatória.\"),\n    // confSenha: yup\n    //     .string()\n    //     .oneOf([yup.ref(\"senha\"), null], \"Confirmação de Senha e Senha devem ser iguais.\")\n    //     .required(\"Confirmação de Senha é obrigatória.\"),\n    ativo: yup.boolean().required(\"Situação é obrigatória.\")\n  });\n  function handleChange(event) {\n    //rawValue é o valor sem máscara e value é o valor com máscara\n    const value = event.target.rawValue ? event.target.rawValue : event.target.value;\n    const name = event.target.name;\n    setInputs({\n      ...inputs,\n      [name]: value\n    });\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    validator.validate(inputs, {\n      abortEarly: false\n    }).then(() => {\n      setErrors({});\n      axios.put(`http://localhost:8080/api/alunos/${idAluno}`, inputs, {\n        headers: authHeader()\n      }).then(response => {\n        if (response.status === 200) {\n          modal.show();\n        } else {\n          console.log(response);\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    }).catch(error => {\n      setErrors({});\n      error.inner.forEach(err => {\n        setErrors(prevErrors => ({\n          ...prevErrors,\n          [err.path]: err.message\n        }));\n      });\n    });\n  }\n  function closeModalAndRedirect() {\n    modal.hide();\n    navigate(\"/alunos\");\n  }\n  useEffect(() => {\n    const informModal = new bootstrap.Modal(\"#informModal\", {});\n    setModal(informModal);\n    setInputs({\n      ...inputs,\n      id: idAluno\n    });\n    axios.get(`http://localhost:8080/api/alunos/${idAluno}`, {\n      headers: authHeader()\n    }).then(response => {\n      if (response.status === 200) {\n        setInputs(response.data);\n      } else {\n        console.log(response);\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }, []);\n  useEffect(() => {\n    if (Object.keys(inputs).length > 0) {\n      validator.validate(inputs, {\n        abortEarly: false\n      }).then(() => {\n        //necessário porque quando corrigia o último erro, ele não era eliminado\n        setErrors({});\n      }).catch(error => {\n        setErrors({});\n        error.inner.forEach(err => {\n          setErrors(prevErrors => ({\n            ...prevErrors,\n            [err.path]: err.message\n          }));\n        });\n      });\n    }\n  }, [inputs]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between align-items-center\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Altera\\xE7\\xE3o de Aluno\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      noValidate: true,\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsxDEV(FormAluno, {\n        handleChange: handleChange,\n        inputs: inputs,\n        errors: errors\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/alunos\",\n          className: \"btn btn-secondary me-1\",\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Salvar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(InformModal, {\n      info: \"Aluno alterado com sucesso!\",\n      action: closeModalAndRedirect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(Alteracao, \"kcoQt0ECULgyluQBn6qOnvZw4Sg=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = Alteracao;\nexport default Alteracao;\nvar _c;\n$RefreshReg$(_c, \"Alteracao\");","map":{"version":3,"names":["useEffect","useState","Link","useNavigate","useParams","yup","axios","bootstrap","FormAluno","InformModal","authHeader","Alteracao","inputs","setInputs","errors","setErrors","modal","setModal","undefined","navigate","idAluno","id","validator","object","shape","nome","string","required","dataNascimento","date","cpf","length","sexo","oneOf","telefone","email","ativo","boolean","handleChange","event","value","target","rawValue","name","handleSubmit","preventDefault","validate","abortEarly","then","put","headers","response","status","show","console","log","catch","error","inner","forEach","err","prevErrors","path","message","closeModalAndRedirect","hide","informModal","Modal","get","data","Object","keys"],"sources":["C:/Users/wesle/OneDrive/Documentos/Git/trabalho_web/frontend/src/pages/alunos/Alteracao.js"],"sourcesContent":["import { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport * as yup from \"yup\";\nimport axios from \"axios\";\nimport bootstrap from \"bootstrap/dist/js/bootstrap.bundle.min.js\";\nimport FormAluno from \"../../components/FormAluno\";\nimport InformModal from \"../../components/InformModal\";\nimport { authHeader } from \"../../services/authServices\";\n\nconst Alteracao = () => {\n    const [inputs, setInputs] = useState({});\n    const [errors, setErrors] = useState({});\n    const [modal, setModal] = useState(undefined);\n    const navigate = useNavigate();\n\n    const idAluno = useParams().id;\n    if (!idAluno) {\n        navigate(\"/listagem\");\n    }\n\n    //https://github.com/jquense/yup\n    const validator = yup.object().shape({\n        nome: yup.string().required(\"Nome é obrigatório.\"),\n        dataNascimento: yup.date().required(\"Data de nascimento é obrigatória.\"),\n        cpf: yup.string().length(11, \"CPF está incompleto.\").required(\"CPF é obrigatório.\"),\n        sexo: yup.string().oneOf([\"M\", \"F\", \"O\"], \"Gênero está incorreto.\").required(\"Gênero é obrigatório.\"),\n        telefone: yup.string().length(11, \"Telefone está incompleto.\").required(\"Telefone é obrigatório.\"),\n        email: yup.string().email(\"E-mail inválido.\").required(\"E-mail é obrigatório.\"),\n        //durante a alteração, senha e confSenha não são obrigatórios\n        // senha: yup.string().min(6, \"Senha deve ter pelo menos 6 caracteres.\").max(12, \"Senha deve ter no máximo 12 caracteres.\").required(\"Senha é obrigatória.\"),\n        // confSenha: yup\n        //     .string()\n        //     .oneOf([yup.ref(\"senha\"), null], \"Confirmação de Senha e Senha devem ser iguais.\")\n        //     .required(\"Confirmação de Senha é obrigatória.\"),\n        ativo: yup.boolean().required(\"Situação é obrigatória.\"),\n    });\n\n    function handleChange(event) {\n        //rawValue é o valor sem máscara e value é o valor com máscara\n        const value = event.target.rawValue ? event.target.rawValue : event.target.value;\n        const name = event.target.name;\n        setInputs({ ...inputs, [name]: value });\n    }\n\n    function handleSubmit(event) {\n        event.preventDefault();\n        validator\n            .validate(inputs, { abortEarly: false })\n            .then(() => {\n                setErrors({});\n                axios\n                    .put(`http://localhost:8080/api/alunos/${idAluno}`, inputs, { headers: authHeader() })\n                    .then((response) => {\n                        if (response.status === 200) {\n                            modal.show();\n                        } else {\n                            console.log(response);\n                        }\n                    })\n                    .catch((error) => {\n                        console.log(error);\n                    });\n            })\n            .catch((error) => {\n                setErrors({});\n                error.inner.forEach((err) => {\n                    setErrors((prevErrors) => ({ ...prevErrors, [err.path]: err.message }));\n                });\n            });\n    }\n\n    function closeModalAndRedirect() {\n        modal.hide();\n        navigate(\"/alunos\");\n    }\n\n    useEffect(() => {\n        const informModal = new bootstrap.Modal(\"#informModal\", {});\n        setModal(informModal);\n        setInputs({ ...inputs, id: idAluno });\n        axios\n            .get(`http://localhost:8080/api/alunos/${idAluno}`, { headers: authHeader() })\n            .then((response) => {\n                if (response.status === 200) {\n                    setInputs(response.data);\n                } else {\n                    console.log(response);\n                }\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n    }, []);\n\n    useEffect(() => {\n        if (Object.keys(inputs).length > 0) {\n            validator\n                .validate(inputs, { abortEarly: false })\n                .then(() => {\n                    //necessário porque quando corrigia o último erro, ele não era eliminado\n                    setErrors({});\n                })\n                .catch((error) => {\n                    setErrors({});\n                    error.inner.forEach((err) => {\n                        setErrors((prevErrors) => ({ ...prevErrors, [err.path]: err.message }));\n                    });\n                });\n        }\n    }, [inputs]);\n\n    return (\n        <>\n            <div className=\"d-flex justify-content-between align-items-center\">\n                <h1>Alteração de Aluno</h1>\n            </div>\n            <hr />\n            <form onSubmit={handleSubmit} noValidate autoComplete=\"off\">\n                <FormAluno handleChange={handleChange} inputs={inputs} errors={errors} />\n                <div className=\"mt-3\">\n                    <Link to=\"/alunos\" className=\"btn btn-secondary me-1\">\n                        Cancelar\n                    </Link>\n                    <button type=\"submit\" className=\"btn btn-primary\">\n                        Salvar\n                    </button>\n                </div>\n            </form>\n            <InformModal info=\"Aluno alterado com sucesso!\" action={closeModalAndRedirect} />\n        </>\n    );\n};\n\nexport default Alteracao;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}