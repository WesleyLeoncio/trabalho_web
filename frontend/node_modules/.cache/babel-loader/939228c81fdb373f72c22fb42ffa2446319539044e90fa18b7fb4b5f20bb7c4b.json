{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\wesle\\\\OneDrive\\\\Documentos\\\\Git\\\\trabalho_web\\\\frontend\\\\src\\\\pages\\\\alunos\\\\Cadastro.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport * as yup from \"yup\";\nimport axios from \"axios\";\nimport bootstrap from \"bootstrap/dist/js/bootstrap.bundle.min.js\";\nimport FormAluno from \"../../components/FormAluno\";\nimport InformModal from \"../../components/InformModal\";\nimport { authHeader } from \"../../services/authServices\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Cadastro = () => {\n  _s();\n  const [inputs, setInputs] = useState({});\n  const [errors, setErrors] = useState({});\n  const [modal, setModal] = useState(undefined);\n  const navigate = useNavigate();\n\n  //https://github.com/jquense/yup\n  const validator = yup.object().shape({\n    nome: yup.string().required(\"Nome é obrigatório.\"),\n    dataNascimento: yup.date().required(\"Data de nascimento é obrigatória.\"),\n    cpf: yup.string().length(11, \"CPF está incompleto.\").required(\"CPF é obrigatório.\"),\n    sexo: yup.string().oneOf([\"M\", \"F\", \"O\"], \"Gênero está incorreto.\").required(\"Gênero é obrigatório.\"),\n    telefone: yup.string().length(11, \"Telefone está incompleto.\").required(\"Telefone é obrigatório.\"),\n    email: yup.string().email(\"E-mail inválido.\").required(\"E-mail é obrigatório.\"),\n    senha: yup.string().min(6, \"Senha deve ter pelo menos 6 caracteres.\").max(12, \"Senha deve ter no máximo 12 caracteres.\").required(\"Senha é obrigatória.\"),\n    confSenha: yup.string().oneOf([yup.ref(\"senha\"), null], \"Confirmação de Senha e Senha devem ser iguais.\").required(\"Confirmação de Senha é obrigatória.\"),\n    ativo: yup.boolean().required(\"Situação é obrigatória.\")\n  });\n  function handleChange(event) {\n    //rawValue é o valor sem máscara e value é o valor com máscara\n    const value = event.target.rawValue ? event.target.rawValue : event.target.value;\n    const name = event.target.name;\n    setInputs({\n      ...inputs,\n      [name]: value\n    });\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    validator.validate(inputs, {\n      abortEarly: false\n    }).then(() => {\n      setErrors({});\n      axios.post(\"http://localhost:8080/api/alunos\", inputs, {\n        headers: authHeader()\n      }).then(response => {\n        if (response.status === 201) {\n          modal.show();\n        } else {\n          console.log(response);\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    }).catch(error => {\n      setErrors({});\n      error.inner.forEach(err => {\n        setErrors(prevErrors => ({\n          ...prevErrors,\n          [err.path]: err.message\n        }));\n      });\n    });\n  }\n  function closeModalAndRedirect() {\n    modal.hide();\n    navigate(\"/alunos\");\n  }\n  useEffect(() => {\n    const informModal = new bootstrap.Modal(\"#informModal\", {});\n    setModal(informModal);\n  }, []);\n  useEffect(() => {\n    if (Object.keys(inputs).length > 0) {\n      validator.validate(inputs, {\n        abortEarly: false\n      }).then(() => {\n        //necessário porque quando corrigia o último erro, ele não era eliminado\n        setErrors({});\n      }).catch(error => {\n        setErrors({});\n        error.inner.forEach(err => {\n          setErrors(prevErrors => ({\n            ...prevErrors,\n            [err.path]: err.message\n          }));\n        });\n      });\n    }\n  }, [inputs]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between align-items-center\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Novo Aluno\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      noValidate: true,\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsxDEV(FormAluno, {\n        handleChange: handleChange,\n        inputs: inputs,\n        errors: errors,\n        isNew: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/alunos\",\n          className: \"btn btn-secondary me-1\",\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Salvar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(InformModal, {\n      info: \"Aluno cadastrado com sucesso!\",\n      action: closeModalAndRedirect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(Cadastro, \"uGVTL/wQali/L3o15hoW4mmpYTI=\", false, function () {\n  return [useNavigate];\n});\n_c = Cadastro;\nexport default Cadastro;\nvar _c;\n$RefreshReg$(_c, \"Cadastro\");","map":{"version":3,"names":["useEffect","useState","Link","useNavigate","yup","axios","bootstrap","FormAluno","InformModal","authHeader","Cadastro","inputs","setInputs","errors","setErrors","modal","setModal","undefined","navigate","validator","object","shape","nome","string","required","dataNascimento","date","cpf","length","sexo","oneOf","telefone","email","senha","min","max","confSenha","ref","ativo","boolean","handleChange","event","value","target","rawValue","name","handleSubmit","preventDefault","validate","abortEarly","then","post","headers","response","status","show","console","log","catch","error","inner","forEach","err","prevErrors","path","message","closeModalAndRedirect","hide","informModal","Modal","Object","keys"],"sources":["C:/Users/wesle/OneDrive/Documentos/Git/trabalho_web/frontend/src/pages/alunos/Cadastro.js"],"sourcesContent":["import { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport * as yup from \"yup\";\nimport axios from \"axios\";\nimport bootstrap from \"bootstrap/dist/js/bootstrap.bundle.min.js\";\nimport FormAluno from \"../../components/FormAluno\";\nimport InformModal from \"../../components/InformModal\";\nimport { authHeader } from \"../../services/authServices\";\n\nconst Cadastro = () => {\n    const [inputs, setInputs] = useState({});\n    const [errors, setErrors] = useState({});\n    const [modal, setModal] = useState(undefined);\n\n    const navigate = useNavigate();\n\n    //https://github.com/jquense/yup\n    const validator = yup.object().shape({\n        nome: yup.string().required(\"Nome é obrigatório.\"),\n        dataNascimento: yup.date().required(\"Data de nascimento é obrigatória.\"),\n        cpf: yup.string().length(11, \"CPF está incompleto.\").required(\"CPF é obrigatório.\"),\n        sexo: yup.string().oneOf([\"M\", \"F\", \"O\"], \"Gênero está incorreto.\").required(\"Gênero é obrigatório.\"),\n        telefone: yup.string().length(11, \"Telefone está incompleto.\").required(\"Telefone é obrigatório.\"),\n        email: yup.string().email(\"E-mail inválido.\").required(\"E-mail é obrigatório.\"),\n        senha: yup.string().min(6, \"Senha deve ter pelo menos 6 caracteres.\").max(12, \"Senha deve ter no máximo 12 caracteres.\").required(\"Senha é obrigatória.\"),\n        confSenha: yup\n            .string()\n            .oneOf([yup.ref(\"senha\"), null], \"Confirmação de Senha e Senha devem ser iguais.\")\n            .required(\"Confirmação de Senha é obrigatória.\"),\n        ativo: yup.boolean().required(\"Situação é obrigatória.\"),\n    });\n\n    function handleChange(event) {\n        //rawValue é o valor sem máscara e value é o valor com máscara\n        const value = event.target.rawValue ? event.target.rawValue : event.target.value;\n        const name = event.target.name;\n        setInputs({ ...inputs, [name]: value });\n    }\n\n    function handleSubmit(event) {\n        event.preventDefault();\n        validator\n            .validate(inputs, { abortEarly: false })\n            .then(() => {\n                setErrors({});\n                axios\n                    .post(\"http://localhost:8080/api/alunos\", inputs, { headers: authHeader() })\n                    .then((response) => {\n                        if (response.status === 201) {\n                            modal.show();\n                        } else {\n                            console.log(response);\n                        }\n                    })\n                    .catch((error) => {\n                        console.log(error);\n                    });\n            })\n            .catch((error) => {\n                setErrors({});\n                error.inner.forEach((err) => {\n                    setErrors((prevErrors) => ({ ...prevErrors, [err.path]: err.message }));\n                });\n            });\n    }\n\n    function closeModalAndRedirect() {\n        modal.hide();\n        navigate(\"/alunos\");\n    }\n\n    useEffect(() => {\n        const informModal = new bootstrap.Modal(\"#informModal\", {});\n        setModal(informModal);\n    }, []);\n\n    useEffect(() => {\n        if (Object.keys(inputs).length > 0) {\n            validator\n                .validate(inputs, { abortEarly: false })\n                .then(() => {\n                    //necessário porque quando corrigia o último erro, ele não era eliminado\n                    setErrors({});\n                })\n                .catch((error) => {\n                    setErrors({});\n                    error.inner.forEach((err) => {\n                        setErrors((prevErrors) => ({ ...prevErrors, [err.path]: err.message }));\n                    });\n                });\n        }\n    }, [inputs]);\n\n    return (\n        <>\n            <div className=\"d-flex justify-content-between align-items-center\">\n                <h1>Novo Aluno</h1>\n            </div>\n            <hr />\n            <form onSubmit={handleSubmit} noValidate autoComplete=\"off\">\n                <FormAluno handleChange={handleChange} inputs={inputs} errors={errors} isNew={true} />\n                <div className=\"mt-3\">\n                    <Link to=\"/alunos\" className=\"btn btn-secondary me-1\">\n                        Cancelar\n                    </Link>\n                    <button type=\"submit\" className=\"btn btn-primary\">\n                        Salvar\n                    </button>\n                </div>\n            </form>\n            <InformModal info=\"Aluno cadastrado com sucesso!\" action={closeModalAndRedirect} />\n        </>\n    );\n};\n\nexport default Cadastro;\n"],"mappings":";;AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,QAAQ,QAAQ,OAAO;AAChC,SAASC,IAAI,EAAEC,WAAW,QAAQ,kBAAkB;AACpD,OAAO,KAAKC,GAAG,MAAM,KAAK;AAC1B,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,2CAA2C;AACjE,OAAOC,SAAS,MAAM,4BAA4B;AAClD,OAAOC,WAAW,MAAM,8BAA8B;AACtD,SAASC,UAAU,QAAQ,6BAA6B;AAAC;AAAA;AAEzD,MAAMC,QAAQ,GAAG,MAAM;EAAA;EACnB,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGX,QAAQ,CAAC,CAAC,CAAC,CAAC;EACxC,MAAM,CAACY,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAAC,CAAC,CAAC,CAAC;EACxC,MAAM,CAACc,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAACgB,SAAS,CAAC;EAE7C,MAAMC,QAAQ,GAAGf,WAAW,EAAE;;EAE9B;EACA,MAAMgB,SAAS,GAAGf,GAAG,CAACgB,MAAM,EAAE,CAACC,KAAK,CAAC;IACjCC,IAAI,EAAElB,GAAG,CAACmB,MAAM,EAAE,CAACC,QAAQ,CAAC,qBAAqB,CAAC;IAClDC,cAAc,EAAErB,GAAG,CAACsB,IAAI,EAAE,CAACF,QAAQ,CAAC,mCAAmC,CAAC;IACxEG,GAAG,EAAEvB,GAAG,CAACmB,MAAM,EAAE,CAACK,MAAM,CAAC,EAAE,EAAE,sBAAsB,CAAC,CAACJ,QAAQ,CAAC,oBAAoB,CAAC;IACnFK,IAAI,EAAEzB,GAAG,CAACmB,MAAM,EAAE,CAACO,KAAK,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,wBAAwB,CAAC,CAACN,QAAQ,CAAC,uBAAuB,CAAC;IACrGO,QAAQ,EAAE3B,GAAG,CAACmB,MAAM,EAAE,CAACK,MAAM,CAAC,EAAE,EAAE,2BAA2B,CAAC,CAACJ,QAAQ,CAAC,yBAAyB,CAAC;IAClGQ,KAAK,EAAE5B,GAAG,CAACmB,MAAM,EAAE,CAACS,KAAK,CAAC,kBAAkB,CAAC,CAACR,QAAQ,CAAC,uBAAuB,CAAC;IAC/ES,KAAK,EAAE7B,GAAG,CAACmB,MAAM,EAAE,CAACW,GAAG,CAAC,CAAC,EAAE,yCAAyC,CAAC,CAACC,GAAG,CAAC,EAAE,EAAE,yCAAyC,CAAC,CAACX,QAAQ,CAAC,sBAAsB,CAAC;IACzJY,SAAS,EAAEhC,GAAG,CACTmB,MAAM,EAAE,CACRO,KAAK,CAAC,CAAC1B,GAAG,CAACiC,GAAG,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,EAAE,gDAAgD,CAAC,CACjFb,QAAQ,CAAC,qCAAqC,CAAC;IACpDc,KAAK,EAAElC,GAAG,CAACmC,OAAO,EAAE,CAACf,QAAQ,CAAC,yBAAyB;EAC3D,CAAC,CAAC;EAEF,SAASgB,YAAY,CAACC,KAAK,EAAE;IACzB;IACA,MAAMC,KAAK,GAAGD,KAAK,CAACE,MAAM,CAACC,QAAQ,GAAGH,KAAK,CAACE,MAAM,CAACC,QAAQ,GAAGH,KAAK,CAACE,MAAM,CAACD,KAAK;IAChF,MAAMG,IAAI,GAAGJ,KAAK,CAACE,MAAM,CAACE,IAAI;IAC9BjC,SAAS,CAAC;MAAE,GAAGD,MAAM;MAAE,CAACkC,IAAI,GAAGH;IAAM,CAAC,CAAC;EAC3C;EAEA,SAASI,YAAY,CAACL,KAAK,EAAE;IACzBA,KAAK,CAACM,cAAc,EAAE;IACtB5B,SAAS,CACJ6B,QAAQ,CAACrC,MAAM,EAAE;MAAEsC,UAAU,EAAE;IAAM,CAAC,CAAC,CACvCC,IAAI,CAAC,MAAM;MACRpC,SAAS,CAAC,CAAC,CAAC,CAAC;MACbT,KAAK,CACA8C,IAAI,CAAC,kCAAkC,EAAExC,MAAM,EAAE;QAAEyC,OAAO,EAAE3C,UAAU;MAAG,CAAC,CAAC,CAC3EyC,IAAI,CAAEG,QAAQ,IAAK;QAChB,IAAIA,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;UACzBvC,KAAK,CAACwC,IAAI,EAAE;QAChB,CAAC,MAAM;UACHC,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAAC;QACzB;MACJ,CAAC,CAAC,CACDK,KAAK,CAAEC,KAAK,IAAK;QACdH,OAAO,CAACC,GAAG,CAACE,KAAK,CAAC;MACtB,CAAC,CAAC;IACV,CAAC,CAAC,CACDD,KAAK,CAAEC,KAAK,IAAK;MACd7C,SAAS,CAAC,CAAC,CAAC,CAAC;MACb6C,KAAK,CAACC,KAAK,CAACC,OAAO,CAAEC,GAAG,IAAK;QACzBhD,SAAS,CAAEiD,UAAU,KAAM;UAAE,GAAGA,UAAU;UAAE,CAACD,GAAG,CAACE,IAAI,GAAGF,GAAG,CAACG;QAAQ,CAAC,CAAC,CAAC;MAC3E,CAAC,CAAC;IACN,CAAC,CAAC;EACV;EAEA,SAASC,qBAAqB,GAAG;IAC7BnD,KAAK,CAACoD,IAAI,EAAE;IACZjD,QAAQ,CAAC,SAAS,CAAC;EACvB;EAEAlB,SAAS,CAAC,MAAM;IACZ,MAAMoE,WAAW,GAAG,IAAI9D,SAAS,CAAC+D,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;IAC3DrD,QAAQ,CAACoD,WAAW,CAAC;EACzB,CAAC,EAAE,EAAE,CAAC;EAENpE,SAAS,CAAC,MAAM;IACZ,IAAIsE,MAAM,CAACC,IAAI,CAAC5D,MAAM,CAAC,CAACiB,MAAM,GAAG,CAAC,EAAE;MAChCT,SAAS,CACJ6B,QAAQ,CAACrC,MAAM,EAAE;QAAEsC,UAAU,EAAE;MAAM,CAAC,CAAC,CACvCC,IAAI,CAAC,MAAM;QACR;QACApC,SAAS,CAAC,CAAC,CAAC,CAAC;MACjB,CAAC,CAAC,CACD4C,KAAK,CAAEC,KAAK,IAAK;QACd7C,SAAS,CAAC,CAAC,CAAC,CAAC;QACb6C,KAAK,CAACC,KAAK,CAACC,OAAO,CAAEC,GAAG,IAAK;UACzBhD,SAAS,CAAEiD,UAAU,KAAM;YAAE,GAAGA,UAAU;YAAE,CAACD,GAAG,CAACE,IAAI,GAAGF,GAAG,CAACG;UAAQ,CAAC,CAAC,CAAC;QAC3E,CAAC,CAAC;MACN,CAAC,CAAC;IACV;EACJ,CAAC,EAAE,CAACtD,MAAM,CAAC,CAAC;EAEZ,oBACI;IAAA,wBACI;MAAK,SAAS,EAAC,mDAAmD;MAAA,uBAC9D;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAmB;MAAA;MAAA;MAAA;IAAA,QACjB,eACN;MAAA;MAAA;MAAA;IAAA,QAAM,eACN;MAAM,QAAQ,EAAEmC,YAAa;MAAC,UAAU;MAAC,YAAY,EAAC,KAAK;MAAA,wBACvD,QAAC,SAAS;QAAC,YAAY,EAAEN,YAAa;QAAC,MAAM,EAAE7B,MAAO;QAAC,MAAM,EAAEE,MAAO;QAAC,KAAK,EAAE;MAAK;QAAA;QAAA;QAAA;MAAA,QAAG,eACtF;QAAK,SAAS,EAAC,MAAM;QAAA,wBACjB,QAAC,IAAI;UAAC,EAAE,EAAC,SAAS;UAAC,SAAS,EAAC,wBAAwB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAE9C,eACP;UAAQ,IAAI,EAAC,QAAQ;UAAC,SAAS,EAAC,iBAAiB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAExC;MAAA;QAAA;QAAA;QAAA;MAAA,QACP;IAAA;MAAA;MAAA;MAAA;IAAA,QACH,eACP,QAAC,WAAW;MAAC,IAAI,EAAC,+BAA+B;MAAC,MAAM,EAAEqD;IAAsB;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA,gBACpF;AAEX,CAAC;AAAC,GAxGIxD,QAAQ;EAAA,QAKOP,WAAW;AAAA;AAAA,KAL1BO,QAAQ;AA0Gd,eAAeA,QAAQ;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}